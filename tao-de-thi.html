<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo đề thi tự luyện - EduPass</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="tao-de-thi.css">
    <link rel="stylesheet" href="edupass-ai.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="logo.png" alt="EduPass Logo" class="logo-img">
                <span class="logo-text">EduPass</span>
            </a>
            <ul class="nav-menu">
                <li><a href="index.html">Trang chủ</a></li>
                <li><a href="tai-lieu.html">Kho tài liệu</a></li>
                <li><a href="luyen-thi.html">Luyện thi</a></li>
                <li><a href="dang-nhap.html">Đăng nhập</a></li>
                <li><a href="dang-ky.html" class="btn-primary">Đăng ký</a></li>
            </ul>
        </div>
    </nav>

    <section class="create-exam-page">
        <div class="container">
            <div class="page-title">
                <h1>✨ Tạo đề thi tự luyện</h1>
                <p>Tự tạo đề thi, làm bài online và luyện tập cá nhân</p>
            </div>

            <!-- Hướng dẫn sử dụng -->
            <div class="guide-section">
                <button class="guide-toggle" onclick="toggleGuide()">
                    📖 Cách tạo đề thi tự luyện trên EduPass
                    <span class="toggle-icon">▼</span>
                </button>
                <div class="guide-content" id="guideContent">
                    <div class="guide-steps">
                        <div class="guide-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Nhập thông tin đề thi</h4>
                                <p>Điền tên đề, chọn lớp, môn học và chủ đề (nếu có)</p>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Chọn cách tạo đề</h4>
                                <ul>
                                    <li><strong>Thêm câu hỏi trắc nghiệm trực tiếp</strong></li>
                                    <li><strong>Hoặc dùng AI để tạo câu hỏi từ file đề</strong></li>
                                </ul>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Thiết lập đề thi</h4>
                                <ul>
                                    <li>Số câu hỏi</li>
                                    <li>Thời gian làm bài</li>
                                    <li>Mức độ đề</li>
                                    <li>Bật/tắt xem đáp án sau khi nộp</li>
                                </ul>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Xem trước đề</h4>
                                <p>Nhấn <strong>"Xem trước đề"</strong> để kiểm tra nội dung</p>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h4>Bắt đầu làm bài</h4>
                                <p>Nhấn <strong>"Bắt đầu làm bài"</strong> để luyện tập ngay</p>
                            </div>
                        </div>
                    </div>

                    <div class="guide-notes">
                        <h4>⭐ LƯU Ý CHO HỌC VIÊN</h4>
                        <ul>
                            <li>✅ Có thể lưu đề để làm lại nhiều lần</li>
                            <li>✅ Nên bật xáo trộn câu hỏi để luyện hiệu quả hơn</li>
                            <li>✅ Sau khi nộp bài, hệ thống sẽ hiển thị điểm và đáp án</li>
                            <li>✅ Dữ liệu đề thi được lưu trong tài khoản cá nhân</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Đề thi đã lưu -->
            <div class="saved-exams-section" id="savedExamsSection" style="display: none;">
                <div class="section-header">
                    <h2>📚 Đề thi đã lưu của bạn</h2>
                    <p>Nhấn vào đề để làm lại</p>
                </div>
                <div class="saved-exams-grid" id="savedExamsGrid"></div>
            </div>

            <div class="exam-creator-layout">
                <!-- Left Column: Form -->
                <div class="creator-main">
                    <!-- 1. THÔNG TIN ĐỀ THI -->
                    <div class="creator-card">
                        <div class="card-header">
                            <span class="card-icon">🧩</span>
                            <h2>Thông tin đề thi</h2>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Tên đề thi <span class="required">*</span></label>
                                <input type="text" id="examName" class="form-input" placeholder="Ví dụ: Luyện Toán chương Hàm số" required>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Lớp <span class="required">*</span></label>
                                    <select id="examGrade" class="form-select" required>
                                        <option value="">-- Chọn lớp --</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>Môn học <span class="required">*</span></label>
                                    <select id="examSubject" class="form-select" required>
                                        <option value="">-- Chọn môn --</option>
                                        <option value="toan">Toán</option>
                                        <option value="van">Văn</option>
                                        <option value="anh">Anh</option>
                                        <option value="ly">Lý</option>
                                        <option value="hoa">Hóa</option>
                                        <option value="sinh">Sinh</option>
                                        <option value="su">Sử</option>
                                        <option value="dia">Địa</option>
                                        <option value="gdcd">GDCD</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Chủ đề <span class="optional">(tuỳ chọn)</span></label>
                                <input type="text" id="examTopic" class="form-input" placeholder="Ví dụ: Dao động, Hàm số, Thì tiếng Anh">
                            </div>
                        </div>
                    </div>

                    <!-- 2. CÁCH TẠO ĐỀ -->
                    <div class="creator-card">
                        <div class="card-header">
                            <span class="card-icon">📝</span>
                            <h2>Cách tạo đề</h2>
                        </div>
                        <div class="card-body">
                            <div class="create-method-tabs">
                                <button class="tab-btn active" data-tab="manual">
                                    ✍️ Tạo câu hỏi nhanh
                                </button>
                                <button class="tab-btn" data-tab="ai">
                                    🤖 Dán từ AI
                                </button>
                            </div>

                            <!-- Tab 1: Manual Questions -->
                            <div class="tab-content active" id="manual-tab">
                                <button class="btn-add-question" onclick="openQuestionModal()">
                                    ➕ Thêm câu hỏi
                                </button>
                                <div id="questionsList" class="questions-list">
                                    <p class="empty-state">Chưa có câu hỏi nào. Nhấn "Thêm câu hỏi" để bắt đầu!</p>
                                </div>
                            </div>

                            <!-- Tab 2: AI Paste -->
                            <div class="tab-content" id="ai-tab">
                                <div class="ai-paste-section">
                                    <div class="ai-instructions">
                                        <h4>🤖 Hướng dẫn sử dụng AI để tạo câu hỏi</h4>
                                        <div class="instruction-steps">
                                            <div class="step">
                                                <span class="step-number">1</span>
                                                <div class="step-content">
                                                    <strong>Copy prompt này và dán vào Groq/Claude/ChatGPT:</strong>
                                                    <div class="prompt-box">
                                                        <button class="btn-copy-prompt" onclick="copyPrompt()">📋 Copy Prompt</button>
                                                        <pre id="aiPrompt">Hãy chuyển đổi đề thi sau thành định dạng JSON với cấu trúc:
[
  {
    "content": "Nội dung câu hỏi",
    "answers": {
      "A": "Đáp án A",
      "B": "Đáp án B",
      "C": "Đáp án C",
      "D": "Đáp án D"
    },
    "correct": "A"
  }
]

Đề thi của tôi:
[Dán nội dung đề thi của bạn vào đây]</pre>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="step">
                                                <span class="step-number">2</span>
                                                <div class="step-content">
                                                    <strong>Đính kèm file đề thi của bạn (PDF, ảnh, Word)</strong>
                                                    <p>AI sẽ đọc file và chuyển đổi thành JSON</p>
                                                </div>
                                            </div>
                                            
                                            <div class="step">
                                                <span class="step-number">3</span>
                                                <div class="step-content">
                                                    <strong>Copy kết quả JSON từ AI và dán vào ô bên dưới:</strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="ai-paste-area">
                                        <label for="aiJsonInput">Dán JSON từ AI vào đây:</label>
                                        <textarea id="aiJsonInput" class="json-input" rows="15" placeholder='[
  {
    "content": "Câu hỏi 1?",
    "answers": {
      "A": "Đáp án A",
      "B": "Đáp án B",
      "C": "Đáp án C",
      "D": "Đáp án D"
    },
    "correct": "A"
  }
]'></textarea>
                                        <div class="ai-actions">
                                            <button class="btn-action btn-validate" onclick="validateAndImportJSON()">
                                                ✅ Kiểm tra & Nhập câu hỏi
                                            </button>
                                            <button class="btn-action btn-clear-json" onclick="clearJSON()">
                                                🗑️ Xóa
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. CÀI ĐẶT ĐỀ -->
                    <div class="creator-card">
                        <div class="card-header">
                            <span class="card-icon">⚙️</span>
                            <h2>Cài đặt đề</h2>
                        </div>
                        <div class="card-body">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Số câu hỏi</label>
                                    <input type="number" id="questionCount" class="form-input" min="5" max="100" value="20">
                                </div>

                                <div class="form-group">
                                    <label>Thời gian (phút)</label>
                                    <input type="number" id="examDuration" class="form-input" min="10" max="180" value="45">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Mức độ</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="difficulty" value="easy" checked>
                                        <span>Cơ bản</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="difficulty" value="medium">
                                        <span>Trung bình</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="difficulty" value="hard">
                                        <span>Nâng cao</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="difficulty" value="mixed">
                                        <span>Tổng hợp</span>
                                    </label>
                                </div>
                            </div>

                            <div class="toggle-group">
                                <div class="toggle-item">
                                    <label class="toggle-label">
                                        <input type="checkbox" id="shuffleQuestions" class="toggle-input">
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-text">Xáo trộn câu hỏi</span>
                                    </label>
                                </div>

                                <div class="toggle-item">
                                    <label class="toggle-label">
                                        <input type="checkbox" id="showAnswers" class="toggle-input" checked>
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-text">Xem đáp án sau khi nộp</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Actions & Preview -->
                <div class="creator-sidebar">
                    <div class="action-card sticky">
                        <h3>🚀 Hành động</h3>
                        <div class="action-buttons">
                            <button class="btn-action btn-preview" onclick="previewExam()">
                                👁️ Xem trước đề
                            </button>
                            <button class="btn-action btn-save" onclick="saveExam()">
                                💾 Lưu đề
                            </button>
                            <button class="btn-action btn-start" onclick="startExam()">
                                ▶️ Bắt đầu làm bài
                            </button>
                        </div>

                        <div class="exam-summary">
                            <h4>📊 Tóm tắt</h4>
                            <div class="summary-item">
                                <span>Số câu:</span>
                                <strong id="summaryQuestions">0</strong>
                            </div>
                            <div class="summary-item">
                                <span>Thời gian:</span>
                                <strong id="summaryTime">45 phút</strong>
                            </div>
                            <div class="summary-item">
                                <span>Mức độ:</span>
                                <strong id="summaryDifficulty">Cơ bản</strong>
                            </div>
                        </div>

                        <div class="quick-tips">
                            <h4>💡 Mẹo nhỏ</h4>
                            <ul>
                                <li>Thêm ít nhất 10 câu hỏi để đề thi hiệu quả</li>
                                <li>Bật xáo trộn để tránh học vẹt</li>
                                <li>Đặt thời gian hợp lý: 2-3 phút/câu</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal thêm câu hỏi -->
    <div id="questionModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>➕ Thêm câu hỏi</h3>
                <button class="modal-close" onclick="closeQuestionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nội dung câu hỏi <span class="required">*</span></label>
                    <textarea id="questionContent" class="form-textarea" rows="3" placeholder="Nhập nội dung câu hỏi..." required></textarea>
                </div>

                <div class="answers-section">
                    <label>Đáp án</label>
                    <div class="answer-item">
                        <input type="radio" name="correctAnswer" value="A" id="correctA">
                        <label for="correctA" class="answer-label">A</label>
                        <input type="text" id="answerA" class="answer-input" placeholder="Nhập đáp án A" required>
                    </div>
                    <div class="answer-item">
                        <input type="radio" name="correctAnswer" value="B" id="correctB">
                        <label for="correctB" class="answer-label">B</label>
                        <input type="text" id="answerB" class="answer-input" placeholder="Nhập đáp án B" required>
                    </div>
                    <div class="answer-item">
                        <input type="radio" name="correctAnswer" value="C" id="correctC">
                        <label for="correctC" class="answer-label">C</label>
                        <input type="text" id="answerC" class="answer-input" placeholder="Nhập đáp án C" required>
                    </div>
                    <div class="answer-item">
                        <input type="radio" name="correctAnswer" value="D" id="correctD">
                        <label for="correctD" class="answer-label">D</label>
                        <input type="text" id="answerD" class="answer-input" placeholder="Nhập đáp án D" required>
                    </div>
                </div>

                <p class="hint-text">💡 Chọn radio button bên trái để đánh dấu đáp án đúng</p>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeQuestionModal()">Huỷ</button>
                <button class="btn-confirm" onclick="saveQuestion()">✅ Lưu câu hỏi</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <img src="logo.png" alt="EduPass Logo" class="footer-logo">
                    <div class="footer-description">
                        <h4>EduPass</h4>
                        <p>Nền tảng học tập trực tuyến với kho đề thi và tài liệu phong phú.</p>
                    </div>
                </div>
                <div class="footer-center">
                    <div class="footer-links">
                        <a href="index.html" class="footer-link">Trang chủ</a>
                        <a href="tai-lieu.html" class="footer-link">Kho tài liệu</a>
                        <a href="luyen-thi.html" class="footer-link">Luyện thi</a>
                        <a href="tao-de-thi.html" class="footer-link">Tạo đề thi</a>
                    </div>
                    <p>
                        <a href="cau-chuyen.html" class="footer-link">Câu chuyện EduPass</a> | 
                        <a href="hanh-trinh-edupass.html" class="footer-link">Hành trình EduPass</a>
                    </p>
                </div>
                <div class="footer-contact-col">
                    <h4>Liên hệ</h4>
                    <p>📧 <a href="mailto:trcuong12112008@gmail.com">trcuong12112008@gmail.com</a></p>
                    <p>📱 <a href="tel:0348908243">0348 908 243</a></p>
                    <p>📱 <a href="tel:0876422788">0876 422 788</a></p>
                </div>
                <div class="footer-right">
                    <p>&copy; 2026 EduPass. All rights reserved.</p>
                    <p class="footer-tagline">Learn today. Pass tomorrow.</p>
                    <p class="footer-description-text">EduPass – Nền tảng học tập thông minh cho học sinh THPT</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Một sản phẩm do nhóm học sinh Trường THCS-THPT Hòa Bình thực hiện.</p>
                <p class="footer-thank-you">Cảm ơn bạn đã lựa chọn đồng hành cùng EduPass. Nếu trải nghiệm chưa thật sự hoàn hảo, chúng tôi xin lỗi và sẽ không ngừng hoàn thiện để mang đến môi trường học tập tốt hơn, giúp bạn tự tin tiến gần hơn tới mục tiêu của mình.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="tao-de-thi.js"></script>
    <script src="edupass-ai.js"></script>
</body>
</html>
